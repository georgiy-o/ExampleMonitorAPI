[Unit]
Description=Simple HTTP Python-Server
Requires=network.target
After=network.target
[Service]
Type=oneshot
RemainAfterExit=True
ExecStartPre=/bin/bash -c '/opt/monitor_api/monitor_api --start &> /dev/null &'
ExecStart=/opt/monitor_api/goapi.sh start
ExecStop=/bin/bash -c 'kill -s SIGKILL $(ps -ef | grep -i "monitor_api" | grep -v grep | awk "{print \$2}")'
[Install]
WantedBy=multi-user.target